(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},"11d0":function(e,t,n){"use strict";n("317b")},12:function(e,t){},1490:function(e,t,n){},1921:function(e,t,n){},2:function(e,t){},"2a89":function(e,t,n){"use strict";n("4101")},3:function(e,t){},"317b":function(e,t,n){},4:function(e,t){},4101:function(e,t,n){},"46c0":function(e,t,n){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);t=n("2b0e");var a=n("f825"),i=(a=n.n(a),n("f8ce"),{name:"App",provide(){return{reload:this.reload}},data:()=>({isRouterAlive:!0}),methods:{reload(){this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))}}}),o=n("2877"),r=Object(o.a)(i,(function(){var e=this._self._c;return e("div",{attrs:{id:"app"}},[this.isRouterAlive?e("router-view"):this._e()],1)}),[],!1,null,null,null).exports,l=(i=n("8c4f"),n("c0d8")),s=n.n(l),c=(l={inject:["reload"],data:()=>({action:"",backendPublic:"",afterVerifyContent:""}),mounted:function(){},methods:{init(e,t,n){this.action=e,this.backendPublic=t,this.afterVerifyContent=n,new URLSearchParams(window.location.search),$(".otp-event").each((function(){var e=$(this).find(".digits"),t=$(this).find(".otp-submit");e.keydown((function(e){var t=$(this).val();if(37==e.keyCode)$(this).prev().focus(),e.preventDefault();else if(39==e.keyCode)$(this).next().focus(),e.preventDefault();else if(1==t.length&&8!=e.keyCode&&46!=e.keyCode){var n=$(this).next();1==n.length&&0==n.val().length&&n.focus()}else if(0==t.length&&8==e.keyCode)$(this).prev().val(""),$(this).prev().focus();else if(1==t.length&&8==e.keyCode)$(this).val("");else if(0==t.length&&46==e.keyCode){var a=$(this).next();for(a.val("");0<a.next().length;)if(a.val(a.next().val()),0==(a=a.next()).next().length){a.val("");break}}})).focus((function(){$(this).select(),""===$(this).prev().val()?$(this).prev().focus():$(this).next().val()&&$(this).next().focus()})).keyup((function(n){e.each((function(e){0!=$(this).val().length?$(this).addClass("otp-filled-active"):$(this).removeClass("otp-filled-active"),$(this).val()})),1==$(this).val().length&&37!=n.keyCode&&39!=n.keyCode&&($(this).next().focus(),n.preventDefault()),e.each((function(e){""!=$(this).val()?t.prop("disabled",!1):t.prop("disabled",!0)}))}))}))},verify(){let e=this;document.getElementById("code").value+=document.getElementById("digits-1").value,document.getElementById("code").value+=document.getElementById("digits-2").value,document.getElementById("code").value+=document.getElementById("digits-3").value,document.getElementById("code").value+=document.getElementById("digits-4").value,document.getElementById("code").value+=document.getElementById("digits-5").value,document.getElementById("code").value+=document.getElementById("digits-6").value;var t=document.getElementById("code").value;let n={};Auth(this.$parent.getSelf().getWalletAddress(),t,"google",this.action,this.afterVerifyContent,(function(t){n.data=JSON.parse(t),""!==n.data.Error&&null!==n.data.Error&&void 0!==n.data.Error?"reload"===n.data.Error?e.reload():(e.$Message.error("google authenticator verify failed"),e.$parent.getSelf().afterVerify(!1,"")):(e.$Message.success("google authenticator verify successed"),e.$parent.getSelf().afterVerify(!0,n.data.Data))}))}}},l=(n("cbdc"),Object(o.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"otp-wrapper otp-event"},[t("h2",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[e._v("Google Authenticator")]),e._m(0),t("div",[t("Button",{staticStyle:{"margin-top":"30px","margin-right":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.$parent.afterVerify(!1)}}},[e._v("Back")]),t("Button",{staticStyle:{"margin-top":"30px"},attrs:{type:"primary",id:"confirm"},on:{click:function(t){return e.verify()}}},[e._v("Verify")])],1)])}),[function(){var e=this._self._c;return e("form",{staticClass:"otp-container",attrs:{id:"verifyForm",method:"post",action:"/api/auth/verify"}},[e("input",{staticClass:"digits",attrs:{type:"tel",id:"digits-1",maxlength:"1",autocomplete:"off",autofocus:"true"}}),e("input",{staticClass:"digits",attrs:{type:"tel",id:"digits-2",maxlength:"1",autocomplete:"off"}}),e("input",{staticClass:"digits",attrs:{type:"tel",id:"digits-3",maxlength:"1",autocomplete:"off"}}),e("input",{staticClass:"digits",attrs:{type:"tel",id:"digits-4",maxlength:"1",autocomplete:"off"}}),e("input",{staticClass:"digits",attrs:{type:"tel",id:"digits-5",maxlength:"1",autocomplete:"off"}}),e("input",{staticClass:"digits",attrs:{type:"tel",id:"digits-6",maxlength:"1",autocomplete:"off"}}),e("input",{attrs:{type:"hidden",id:"code",name:"code"}})])}],!1,null,"35360dec",null).exports),{inject:["reload"],data:()=>({walletAddress:"",verifyCount:0,triggerTx:"",contractAddress:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",modelBalance:111,modelWalletBalance:0,modelAmount:0}),mounted:function(){},methods:{openLink(e){window.open(e,"_blank")},back(){this.$parent.getSelf().switchPanel("back","SelfVault")},init(e){},deposit(){parseInt(this.modelAmount)<=0?this.$Message.error("amount must be valid"):this.$parent.getSelf().switchPanel("verify","",(function(e){}))},withdraw(){parseInt(this.modelAmount)<=0?this.$Message.error("amount must be valid"):this.$parent.getSelf().switchPanel("verify","",(function(e){}))}}}),d=(c=(n("78c5"),Object(o.a)(c,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"layout"},[t("div",{staticClass:"layout-content-center"},[t("h2",{staticStyle:{"text-align":"center","margin-bottom":"20px"},attrs:{id:"authTitle"}},[e._v("SelfVault")]),t("Input",{attrs:{type:"text",readonly:""},model:{value:e.modelWalletBalance,callback:function(t){e.modelWalletBalance=t},expression:"modelWalletBalance"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Wallet")])]),t("Input",{staticStyle:{"margin-top":"20px"},attrs:{type:"text",readonly:""},model:{value:e.modelBalance,callback:function(t){e.modelBalance=t},expression:"modelBalance"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Balance")])]),t("Row",{staticStyle:{"margin-top":"20px"}},[t("Col",{attrs:{span:"21"}},[t("Input",{attrs:{type:"text"},model:{value:e.modelAmount,callback:function(t){e.modelAmount=t},expression:"modelAmount"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Amount")])])],1),t("Col",{staticStyle:{"margin-top":"5px"},attrs:{span:"3"}},[t("a",{staticStyle:{"margin-left":"5px"},attrs:{href:"javascript:void(0)"},on:{click:function(t){e.modelAmount=e.modelWalletBalance}}},[e._v("Max")])])],1),t("Button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.back()}}},[e._v("Back")]),t("Button",{staticStyle:{"margin-top":"20px","margin-left":"10px"},attrs:{disabled:parseInt(e.modelAmount)<=0,type:"primary"},on:{click:function(t){return e.deposit()}}},[e._v("Deposit")]),t("Button",{staticStyle:{"margin-top":"20px","margin-left":"10px"},attrs:{disabled:parseInt(e.modelAmount)<=0,type:"primary"},on:{click:function(t){return e.withdraw()}}},[e._v("Withdraw")]),t("Button",{directives:[{name:"show",rawName:"v-show",value:""!==e.triggerTx,expression:"triggerTx !== ''"}],staticStyle:{"margin-top":"20px","margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.openLink(e.triggerTx)}}},[e._v("Transaction")])],1)])])}),[],!1,null,"b10eab2e",null).exports),n("5aac")),u=n.n(d),p=(d=n("4c41"),n.n(d)),h=n("2eaf"),m=(d={data(){return{network:"",connect:!1,web3:null,providerOptions:{metamaskconnect:{package:p.a,options:{infuraId:"https://"+this.network+".infura.io/v3/your infura id"}},walletconnect:{package:h.a,options:{infuraId:"https://"+this.network+".infura.io/v3/your infura id"}}},contractAddrMap:{goerli:"0x8eD8bC11E8c2EB21Eb8C1507CD7F60B01cAD8f1E",mainnet:"0xec04F8Ee0493f3d763AB1624BB6aAcaCD94Ac4C1"},contractABI:[{inputs:[{internalType:"bytes",name:"signature",type:"bytes"},{internalType:"bytes",name:"message",type:"bytes"}],name:"Load",outputs:[{internalType:"bytes",name:"recoverID",type:"bytes"},{internalType:"bytes",name:"web3Key",type:"bytes"},{internalType:"bytes",name:"backendKey",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"recoverID",type:"bytes"},{internalType:"bytes",name:"web3Key",type:"bytes"},{internalType:"bytes",name:"backendKey",type:"bytes"}],name:"Register",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"Meta",outputs:[{internalType:"uint256",name:"storeFee",type:"uint256"},{internalType:"address",name:"nftAddr",type:"address"},{internalType:"uint256",name:"registTotal",type:"uint256"}],stateMutability:"view",type:"function"}]}},mounted(){void 0!==localStorage.getItem("network")&&null!==localStorage.getItem("network")&&this.setNetwork(localStorage.getItem("network"))},methods:{setNetwork(e){this.network=e,void 0!==localStorage.getItem("wallet")&&null!==localStorage.getItem("wallet")&&(e=this.initWeb3Modal(),this.initWeb3(e))},selectNetwork(e){this.setNetwork(e.value),localStorage.setItem("network",e.value)},async init(){var e=this.initWeb3Modal();await e.clearCachedProvider(),await this.initWeb3(e)},async uninit(){await this.initWeb3Modal().clearCachedProvider(),this.ondisconnect()},initWeb3Modal(){var e=this.network,t=this.providerOptions;return new u.a({network:e,cacheProvider:!0,providerOptions:t})},async initWeb3(e){e=await e.connect(),this.web3=new s.a(e);let t=await this.web3.eth.net.getNetworkType();if((t="main"===t?"mainnet":t)!==this.network)this.$Modal.error({title:"invalid network: "+t,content:"Please switch Ethereum network to "+this.network}),await this.uninit();else{let t=this;var n=await this.web3.eth.getAccounts();this.onConnect(n[0]),e.on("accountsChanged",e=>{t.ondisconnect()}),e.on("chainChanged",e=>{t.ondisconnect()}),e.on("disconnect",e=>{t.ondisconnect()})}},onConnect(e){this.connect=!0,localStorage.setItem("wallet",e),this.$parent.onAccountChanged("connect",this.network,e)},ondisconnect(){this.web3=null,this.connect=!1,localStorage.removeItem("wallet"),this.$parent.onAccountChanged("disconnect",this.network,"")},getWeb3(){return this.web3},async Execute(e,t,n,a,i,o,r){t=new this.web3.eth.Contract(this.contractABI,this.contractAddrMap[this.network]).methods[t];let l=this,c={};c=0===i.length?t():t(...i),void 0!==a&&0<a&&(a=s.a.utils.toBN(s.a.utils.toWei(a+"","ether"))),"call"===e?await c.call({from:n},(function(e,t){e?null!=r&&r(e.message):null!=o&&o(t)})):"send"===e&&(t=await c.estimateGas({from:n,value:a}),await c.send({from:n,value:a,gasLimit:t}).on("transactionHash",(function(e){l.$Message.success("web3Execute run succesed: ",e)})).on("confirmation",(function(e,t){})).on("receipt",(function(e){null!=o&&o(e)})).on("error",(function(e){null!=r&&r(e.message)})))}}},d=(n("6393"),Object(o.a)(d,(function(){var e=this,t=e._self._c;return t("div",[t("Row",{staticStyle:{height:"60px","background-color":"#ebe9e7","vertical-align":"middle"}},[t("Col",{attrs:{span:"12"}},[t("div",{staticStyle:{"text-align":"left"}},[t("div",{staticClass:"nav-header-left"},[t("Select",{staticStyle:{width:"90px","text-align":"center"},attrs:{placeholder:"network"},on:{"on-select":e.selectNetwork},model:{value:e.network,callback:function(t){e.network=t},expression:"network"}},[t("Option",{attrs:{value:"mainnet"}},[e._v("mainnet")]),t("Option",{attrs:{value:"goerli"}},[e._v("goerli")]),t("Option",{attrs:{disabled:"",value:"rinkby"}},[e._v("rinkby")])],1)],1)])]),t("Col",{attrs:{span:"12"}},[t("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[t("Button",{staticStyle:{"margin-top":"10px","margin-right":"10px"},attrs:{disabled:""===e.network,type:"primary"},on:{click:function(t){e.connect?e.uninit():e.init()}}},[e._v(e._s(e.connect?"Disconnect":"Connect Wallet"))])],1)])],1)],1)}),[],!1,null,"46713f66",null).exports),n("11f7")),f=(m=(n("3452"),{components:{Editor:m.a},inject:["reload"],data:()=>({lang:"text",content:"",readonly:!1,fileName:"",editorOptions:{enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,tabSize:2,fontSize:16,showPrintMargin:!1},web3Key:"",hasEncrypted:!1}),mounted:function(){},methods:{onUploadBefore(e){let t=this;const n=new FileReader;return n.readAsText(e),n.onload=function(){n.result&&(t.content=n.result)},this.fileName=e.name,!1},init(e){this.web3Key=e,this.hasEncrypted=!1},back(){this.$parent.getSelf().switchPanel("back","cryptoPanel")},encrypt(){let e=this;var t=this.$refs.fileEditor.getValue();""===t?this.$Message.error("content must be non-empty"):(t=n("3452").AES.encrypt(t,e.web3Key).toString(),e.$parent.getSelf().switchPanel("encrypt",t,(function(t){e.content=t,e.hasEncrypted=!0})))},decrypt(){let e=this;var t,a=this.$refs.fileEditor.getValue();""===a?this.$Message.error("content must be non-empty"):(t=n("3452"),e.$parent.getSelf().switchPanel("decrypt",a,(function(n){e.content=t.AES.decrypt(n,e.web3Key).toString(t.enc.Utf8),e.hasEncrypted=!1})))},download(){var e,t=this.$refs.fileEditor.getValue();""===t?this.$Message.error("content must be non-empty"):(e=document.createElement("a"),t=new Blob([t],{type:"text/plain"}),e.href=URL.createObjectURL(t),e.download=""===this.fileName?"selfweb3.json":this.fileName,e.click(),URL.revokeObjectURL(e.href))},editorInit(){n("2099"),n("8a2a"),n("24b9"),n("95b8"),n("818b"),n("0329"),n("2968"),n("b039")},editorChange(e){},editorInput(e){},editorFocus(e){},editorBlur(e){},editorPaste(e){},pageWidth(){var e=0;return window.innerWidth?e=window.innerWidth:document.body&&document.body.clientWidth&&(e=document.body.clientWidth),document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:e},pageHeight(){var e=0;return window.innerHeight?e=window.innerHeight:document.body&&document.body.clientHeight&&(e=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:e}}}),m=(n("11d0"),Object(o.a)(m,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"layout"},[t("div",{staticClass:"layout-content-center"},[t("div",[t("div",[t("h2",{staticStyle:{"text-align":"center","margin-bottom":"1px"}},[e._v("selfweb3")]),t("Button",{staticStyle:{margin:"10px"},attrs:{type:"primary"},on:{click:function(t){return e.back()}}},[e._v("Back")]),t("Button",{staticStyle:{margin:"10px"},attrs:{disabled:!0===e.hasEncrypted,type:"primary"},on:{click:function(t){return e.encrypt()}}},[e._v("Encrypt")]),t("Button",{staticStyle:{margin:"10px"},attrs:{disabled:!1===e.hasEncrypted,type:"primary"},on:{click:function(t){return e.decrypt()}}},[e._v("Decrypt")]),t("Button",{staticStyle:{margin:"10px"},attrs:{disabled:!1===e.hasEncrypted,type:"primary"},on:{click:function(t){return e.download()}}},[e._v("Download")]),t("Upload",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{type:"drag","before-upload":e.onUploadBefore,action:"/"}},[t("div",{staticStyle:{padding:"20px 0"}},[t("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),t("p",[e._v("Click or drag the file here to upload")])],1),""!==e.fileName?t("span",{staticStyle:{color:"green"}},[e._v(e._s(e.fileName))]):e._e()]),t("Editor",{ref:"fileEditor",attrs:{content:e.content,fontSize:14,height:2*e.pageHeight()/3,width:e.pageWidth()/2,lang:e.lang,theme:"chrome",options:e.editorOptions,readonly:"true"===e.readonly},on:{init:e.editorInit,onChange:e.editorChange,onInput:e.editorInput,onFocus:e.editorFocus,onBlur:e.editorBlur,onPaste:e.editorPaste}})],1)])])])])}),[],!1,null,"1d5dd5c5",null).exports),n("9d6e")),g=n("b2e5");g={components:{VueQrcode:n.n(g).a},inject:["reload"],data(){return{hideFooter:!0,popModal:!1,modalMode:"register",placeHolderMap:{verify:{name:"Code",placeholder:"Enter dynamic code...",title:"recovery verify"},register:{name:"Email",placeholder:"Enter recover email...",title:"user registration"},recover:{name:"Email",placeholder:"Enter recover email......",title:"backend recovery"}},items:{columns:[{title:"Key",key:"key",align:"center",minWidth:100},{title:"Value",key:"value",align:"center",minWidth:200},{title:"Action",key:"action",width:200,align:"center",render:(e,t)=>{var n=[];let a=this;return n.push(e("Button",{props:{type:"primary",disabled:!1},on:{click:()=>{void 0===a.items.data[t.index].data.url?a.showPanel(a.items.data[t.index].key,a.items.data[t.index].data.value):a.openLink(a.items.data[t.index].data.url)}}},a.items.data[t.index].data.btnName)),e("div",n)}}],data:[]},modelKey:"",modelValue:"",qrcodeUrl:"",qrcodeSize:200,storeFee:0,web3Key:"",recoverID:"",backendPublic:"",hasRegisted:!1}},mounted:function(){},methods:{openLink(e){window.open(e,"_blank")},init(e,t,n){this.recoverID=e,this.web3Key=t,this.backendPublic=n,e=this.$parent.getSelf().getWallet().contractAddrMap[this.$parent.getSelf().getWallet().network],this.addKV("Wallet",{btnName:"View",value:this.$parent.getSelf().getWalletAddress(),url:"https://etherscan.io/token/"+this.$parent.getSelf().getWalletAddress()},!0),this.addKV("Contract",{btnName:"View",value:e,url:"https://etherscan.io/token/"+e},!1),this.addKV("SelfVault",{value:e,btnName:"Launch"},!1)},addKV(e,t,n){!0===n&&(this.items.data=[]),this.items.data.push({key:e,value:t.value,data:t})},resetModal(){this.modelKey="",this.modelValue=""},register(){var e=this;if(""===this.modelKey)this.$Message.error("encryption name must be non-empty");else{this.popModal=!1;var t=this.$parent.getSelf().generatekey(32);let n={};Register(e.$parent.getSelf().getWalletAddress(),this.modelKey,(function(a){var i,o,r;n.data=JSON.parse(a),""!==n.data.Error&&null!==n.data.Error&&void 0!==n.data.Error?e.$Message.error("user registration failed"):(a=[],i=t,o=n.data.Data.recoverID,r=n.data.Data.backendKey,a.push(s.a.utils.asciiToHex(o)),a.push(s.a.utils.asciiToHex(i)),a.push(s.a.utils.asciiToHex(r)),e.$parent.getSelf().getWallet().Execute("send","Register",e.$parent.getSelf().getWalletAddress(),e.storeFee,a,(function(a){e.resetModal(),e.hasRegisted=!0,e.web3Key=t,e.showQRcode(n.data.Data.qrcode),setTimeout((function(){e.qrcodeUrl=""}),6e4)})))}))}},beforeRecover(){this.resetModal(),this.modalMode="recover",this.popModal=!0},recover(){let e=this;if(""===this.modelKey)this.$Message.error("pushID must be non-empty");else{this.popModal=!1;let t={};Recover(e.$parent.getSelf().getWalletAddress(),this.modelKey,(function(n){t.data=JSON.parse(n),""!==t.data.Error&&null!==t.data.Error&&void 0!==t.data.Error?e.$Message.error("google authenticator recover failed"):(n={name:(n=e.$parent.getSelf().getWalletAddress()).substring(0,4)+"..."+n.substring(n.length-4,n.length),user_email:e.modelKey,message:"[selfweb3] code for dynamic authorization: "+t.data.Data},f.a.send("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",n,"YOUR_PUBLIC_KEY").then(t=>{e.$Message.success("email push successed for recovery"),e.resetModal(),e.modalMode="verify",e.popModal=!0},e=>{}))}))}},afterRecover(){let e=this;if(""===this.modelKey)this.$Message.error("encrypted privateKey must be non-empty");else{this.popModal=!1;let t={};Auth(e.$parent.getSelf().getWalletAddress(),this.modelKey,"email",this.recoverID,this.modelKey,(function(n){t.data=JSON.parse(n),""!==t.data.Error&&null!==t.data.Error&&void 0!==t.data.Error?(e.$Message.error("recovery verify for google authenticator failed"),"reload"===t.data.Error&&e.reload()):(e.resetModal(),e.showQRcode(t.data.Data.qrcode),e.$Message.success("recovery verify for google authenticator successed"),setTimeout((function(){e.qrcodeUrl=""}),6e4))}))}},showEnDecrypt(){this.$parent.getSelf().afterVerify(!0,"cryptoPanel",null)},showPanel(e,t){this.$parent.getSelf().afterVerify(!0,e,t)},showQRcode(e){var t=(t=this.$parent.getSelf().getWalletAddress()).substring(0,4)+"..."+t.substring(t.length-4,t.length);t="selfweb3-"+this.$parent.getSelf().getWallet().network+":"+t;this.qrcodeUrl="otpauth://totp/"+t+"?secret="+e.replace(/=/g,"")},pageWidth(){var e=0;return window.innerWidth?e=window.innerWidth:document.body&&document.body.clientWidth&&(e=document.body.clientWidth),document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:e},pageHeight(){var e=0;return window.innerHeight?e=window.innerHeight:document.body&&document.body.clientHeight&&(e=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:e}}},n("2a89"),l={components:{TOTPPanel:l,VaultPanel:c,WalletPanel:d,CryptoPanel:m,PrivatePanel:Object(o.a)(g,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"layout"},[t("div",{staticClass:"layout-content-center"},[t("div",[t("div",{staticStyle:{margin:"10px"}},[t("h2",{staticStyle:{"margin-bottom":"3px"}},[e._v("selfweb3")]),t("Button",{staticStyle:{margin:"10px"},attrs:{disabled:e.hasRegisted,type:"primary"},on:{click:function(t){e.modalMode="register",e.popModal=!0}}},[e._v("Regist")]),t("Button",{staticStyle:{margin:"10px"},attrs:{disabled:!e.hasRegisted,type:"primary"},on:{click:function(t){return e.beforeRecover()}}},[e._v("Recover")]),t("Button",{staticStyle:{margin:"10px"},attrs:{disabled:!e.hasRegisted||""===e.web3Key,type:"primary"},on:{click:function(t){return e.logout()}}},[e._v("Logout")]),t("Table",{staticStyle:{"margin-top":"8px"},attrs:{border:"","no-data-text":"empty key/value list",columns:e.items.columns,data:e.items.data}})],1),""!==e.qrcodeUrl?t("VueQrcode",{attrs:{value:e.qrcodeUrl,options:{width:150}}}):e._e(),""!==e.qrcodeUrl?t("h3",{staticStyle:{"text-align":"center"}},[e._v("Please add an account through Google Authenticator within 1 minutes.")]):e._e()],1)])]),t("Modal",{attrs:{"footer-hide":e.hideFooter,"class-name":"vertical-center-modal"},model:{value:e.popModal,callback:function(t){e.popModal=t},expression:"popModal"}},[t("p",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[e._v(e._s(e.placeHolderMap[e.modalMode].title))]),t("Input",{attrs:{type:"email",placeholder:e.placeHolderMap[e.modalMode].placeholder},model:{value:e.modelKey,callback:function(t){e.modelKey=t},expression:"modelKey"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v(e._s(e.placeHolderMap[e.modalMode].name))])]),t("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},["register"===e.modalMode?t("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.register()}}},[e._v("Confirm")]):e._e(),"recover"===e.modalMode?t("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.recover()}}},[e._v("Confirm")]):e._e(),"verify"===e.modalMode?t("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.afterRecover()}}},[e._v("Confirm")]):e._e(),t("Button",{on:{click:function(t){e.popModal=!1,e.modalReadonly=!1}}},[e._v("Cancel")])],1)],1)],1)}),[],!1,null,"5eef227d",null).exports},inject:["reload"],data:()=>({network:"",connect:!1,publicKey:"",walletAddress:"",showTOTP:!1,justVerify:!1,showHomePanel:!0,showVaultPanel:!1,showCryptoPanel:!1,showPanels:{},backendPublic:"",afterVerifyFunc:null,apiPrefix:"",loadRandom:"",loadSignature:""}),methods:{getSelf(){return this},init(){let e=this;const t=new Go;WebAssembly.instantiateStreaming(fetch("selfweb3.wasm"),t.importObject).then((function(n){t.run(n.instance),e.loadRandom=e.generatekey(32,!1),e.signTypedData(e.loadRandom,(function(t){e.loadSignature=t,e.load()}))}))},onAccountChanged(e,t,n){"connect"===e?(this.network=t,this.connect=!0,this.modelAuthID=n,this.walletAddress=n,this.init()):"disconnect"===e&&(this.network="",this.connect=!1,this.walletAddress="")},load(){function e(e,n,a){let i={};Load(t.walletAddress,t.getPublic(t.loadRandom,t.loadSignature),n,(function(n){i.data=JSON.parse(n),null!==i.data.Data&&void 0!==i.data.Data&&i.data.Data!=={}?(t.backendPublic=i.data.Data,t.$refs.privatePanel.init(e,a,t.backendPublic)):t.$Message.error("selfweb3 load from backend failed: ",+i.data.Data)}))}let t=this;var n=[];n.push(this.loadSignature),n.push(s.a.utils.asciiToHex(this.loadRandom)),t.$refs.walletPanel.Execute("call","Load",t.walletAddress,0,n,(function(n){t.$refs.privatePanel.hasRegisted=!0;var a=s.a.utils.hexToAscii(n.web3Key);e(s.a.utils.hexToAscii(n.recoverID),n=s.a.utils.hexToAscii(n.backendKey),a)}),(function(n){t.$Message.error("selfweb3 load from contract failed"),e("","","")}))},getWalletAddress(){return this.walletAddress},getWallet(){return this.$refs.walletPanel},switchPanel(e,t,n,a){if("back"===e||""===e)this.showPanels[t]=!1,this.showHomePanel=!this.showHomePanel;else{this.afterVerifyFunc=a;let i=this;this.showTOTP=!0,this.$nextTick((function(){i.$refs.totpPanel.init(e,i.backendPublic,t,n)}))}},afterVerify(e,t,n){!(this.showTOTP=!1)===e&&(null!==this.afterVerifyFunc&&void 0!==this.afterVerifyFunc?this.afterVerifyFunc(n):(this.showHomePanel=!this.showHomePanel,this.showPanels[t]=!0,this.$refs[t].init(n)))},sign(e,t){let n=this;var a=this.getWalletAddress();this.$refs.walletPanel.getWeb3().eth.sign(e,a).then((function(e){null!=t&&t(e)})).catch((function(t){n.$Message.error("sign message failed at web3: ",e,t)}))},signTypedData(e,t){var n=[{type:"string",name:"Message",value:e}];let a=this;var i=this.getWalletAddress();n=[n,i];this.$refs.walletPanel.getWeb3().currentProvider.sendAsync({method:"eth_signTypedData",params:n,from:i},(function(n,i){n||i.error?a.$Message.error("sign message failed at web3: ",e,error):null!=t&&t(i.result)}))},getPublic:(e,t)=>"0x042791d640dc87f1bf43075f6f205ffb5045adebcbd73b9942cf0a65f8970bbe80d7ffe21f66ea200636d54e927591766d9f53a785e40ef01ae9200332e15b651a",generatekey(e,t){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=(!0===t&&(n="0123456789"),"");for(var i=0;i<e;i++){var o=Math.floor(Math.random()*n.length);a+=n.substring(o,o+1)}return a},httpGet(e,t,n){this.$axios.get(this.apiPrefix+e).then((function(e){null!=t&&t(e)})).catch((function(e){}))},httpPost(e,t,n,a){this.$axios.post(this.apiPrefix+e,t).then((function(e){null!=n&&n(e)})).catch((function(e){}))}}},c=Object(o.a)(l,(function(){var e=this,t=e._self._c;return t("div",[t("WalletPanel",{ref:"walletPanel",attrs:{onAccountChanged:e.onAccountChanged}}),e.showTOTP?t("TOTPPanel",{ref:"totpPanel",attrs:{getSelf:e.getSelf}}):e._e(),t("VaultPanel",{directives:[{name:"show",rawName:"v-show",value:e.showPanels.SelfVault&&!e.showTOTP,expression:"showPanels['SelfVault'] && !showTOTP"}],ref:"SelfVault",attrs:{getSelf:e.getSelf}}),t("CryptoPanel",{directives:[{name:"show",rawName:"v-show",value:e.showPanels.cryptoPanel&&!e.showTOTP,expression:"showPanels['cryptoPanel'] && !showTOTP"}],ref:"cryptoPanel",attrs:{getSelf:e.getSelf}}),t("PrivatePanel",{directives:[{name:"show",rawName:"v-show",value:e.showHomePanel&&!e.showTOTP,expression:"showHomePanel && !showTOTP"}],ref:"privatePanel",attrs:{getSelf:e.getSelf}})],1)}),[],!1,null,null,null).exports,t.default.use(i.a),d=[{path:"/",name:"Home",component:c}],m=new i.a({routes:d}),g=n("00e7"),o=n.n(g),l=n("bc3a"),c=n.n(l);t.default.use(a.a),t.default.config.productionTip=!1,t.default.prototype.$cookie=o.a,c.a.defaults.withCredentials=!1,t.default.prototype.$axios=c.a,new t.default({router:m,render:e=>e(r)}).$mount("#app")},6:function(e,t){},6393:function(e,t,n){"use strict";n("1490")},7:function(e,t){},"78c5":function(e,t,n){"use strict";n("46c0")},8:function(e,t){},9:function(e,t){},cbdc:function(e,t,n){"use strict";n("1921")}},[[0,"runtime","npm.walletconnect","npm.crypto-js","npm.eth-json-rpc-filters","npm.keccak","npm.elliptic","npm.hash-base","npm.readable-stream","npm.brace","npm.ethereumjs-abi","npm.view-design","npm.rlp","npm.chenfengyuan","npm.bn.js","npm.vue-router","npm.vue","npm.web3","npm.web3modal","vendors~app"]]]);